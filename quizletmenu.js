javascript:(()=>{if(window.quizletFullMenu)return;window.quizletFullMenu=true;const menu=document.createElement('div');menu.style.position='fixed';menu.style.top='80px';menu.style.left='80px';menu.style.width='320px';menu.style.background='#1e1e1e';menu.style.color='#fff';menu.style.padding='15px';menu.style.borderRadius='12px';menu.style.boxShadow='0 8px 20px rgba(0,0,0,0.7)';menu.style.zIndex='999999';menu.style.fontFamily='Segoe UI, Tahoma, sans-serif';menu.style.transition='all 0.2s ease';document.body.appendChild(menu);const header=document.createElement('div');header.style.display='flex';header.style.justifyContent='space-between';header.style.alignItems='center';header.style.marginBottom='12px';const title=document.createElement('h3');title.innerText='Quizlet Menu V2';title.style.margin='0';title.style.fontSize='17px';title.style.flex='1';title.style.textAlign='center';title.style.color='#fff';const closeBtn=document.createElement('button');closeBtn.innerText='✕';closeBtn.style.background='transparent';closeBtn.style.color='#ff5555';closeBtn.style.border='none';closeBtn.style.cursor='pointer';closeBtn.style.fontSize='16px';closeBtn.onclick=()=>{menu.remove();window.quizletFullMenu=null;};header.appendChild(title);header.appendChild(closeBtn);menu.appendChild(header);function norm(t){return(t||'').toString().replace(/\s+/g,' ').trim();}function buildTruePairs(){try{let s=JSON.parse(__NEXT_DATA__.props.pageProps.dehydratedReduxStateKey);let cards=s.studyModesCommon.studiableData.studiableItems;const set=new Set();cards.forEach(c=>{try{let term=c.cardSides.find(x=>x.label=='word').media[0].plainText;let def=c.cardSides.find(x=>x.label=='definition').media[0].plainText;set.add(norm(term)+'|'+norm(def));set.add(norm(def)+'|'+norm(term));}catch(e){}});return set;}catch(e){return null;}}function tileText(el){return norm(el.innerText.replace('…',''));}function isTruePair(a,b,truePairs){const A=tileText(a),B=tileText(b);for(const p of truePairs){const [x,y]=p.split('|');if((x.startsWith(A)&&y.startsWith(B))||(x.startsWith(B)&&y.startsWith(A)))return true;}if(truePairs.has(A+'|'+B)||truePairs.has(B+'|'+A))return true;return false;}function pickWrongPair(truePairs){const live=[...document.querySelectorAll('.FormattedText')].filter(el=>el.offsetParent!==null); if(live.length<2) return null; for(let attempts=0;attempts<300;attempts++){const i=Math.floor(Math.random()*live.length),j=Math.floor(Math.random()*live.length); if(i===j) continue; const a=live[i],b=live[j]; if(!isTruePair(a,b,truePairs)) return [a,b]; } return null;}function pickCorrectPair(truePairs){const live=[...document.querySelectorAll('.FormattedText')].filter(el=>el.offsetParent!==null); for(const a of live){for(const b of live){if(a===b) continue;if(isTruePair(a,b,truePairs)) return [a,b];}} return null;}function pickAllPairs(truePairs){const live=[...document.querySelectorAll('.FormattedText')].filter(el=>el.offsetParent!==null); const done=new Set(); const allPairs=[]; for(const a of live){for(const b of live){if(a===b) continue;if(!done.has(a)&&!done.has(b)&&isTruePair(a,b,truePairs)){allPairs.push([a,b]); done.add(a); done.add(b);}}} return allPairs;}function shadeColor(col, amt){let useP=false;if(col[0]=='#'){col=col.slice(1); useP=true;} let num=parseInt(col,16); let r=(num>>16)+amt; r=r>255?255:r<0?0:r; let g=((num>>8)&0x00FF)+amt; g=g>255?255:g<0?0:g; let b=(num&0x0000FF)+amt; b=b>255?255:b<0?0:b; return (useP?'#':'')+(r.toString(16).padStart(2,'0'))+(g.toString(16).padStart(2,'0'))+(b.toString(16).padStart(2,'0'));}const menuBase='#1e1e1e';function mkButton(txt,fn){const b=document.createElement('button');const base=shadeColor(menuBase,30);const border=shadeColor(menuBase,-40);const hover=shadeColor(menuBase,60);b.textContent=txt;b.style.width='100%';b.style.margin='6px 0';b.style.padding='10px';b.style.border=`2px solid ${border}`;b.style.borderRadius='8px';b.style.cursor='pointer';b.style.fontSize='15px';b.style.background=base;b.style.color='#fff';b.style.transition='all 0.2s ease';b.onmouseenter=()=>{b.style.background=hover;b.style.transform='scale(1.05)';b.style.boxShadow=`0 0 12px ${hover}77`;};b.onmouseleave=()=>{b.style.background=base;b.style.transform='scale(1)';b.style.boxShadow='none';};b.onclick=fn;b.pulse=(success)=>{const col=success?'#4caf50':'#f44336';b.style.transition='0.15s all';b.style.background=col;setTimeout(()=>{b.style.background=base;},300);};return b;}const correctContainer=document.createElement('div');correctContainer.style.display='flex';correctContainer.style.gap='8px';menu.appendChild(correctContainer);const completeOneBtn=mkButton('Complete 1 Pair',()=>{const truePairs=buildTruePairs();if(!truePairs)return;const pair=pickCorrectPair(truePairs);if(!pair){completeOneBtn.pulse(false);return;}pair[0].click();setTimeout(()=>pair[1].click(),150);completeOneBtn.pulse(true);});completeOneBtn.style.flex='1';correctContainer.appendChild(completeOneBtn);const completeAllBtn=mkButton('Complete All',async()=>{const truePairs=buildTruePairs();if(!truePairs)return;let pair;while((pair=pickCorrectPair(truePairs))!==null){try{pair[0].click();setTimeout(()=>pair[1].click(),150);}catch(e){}await new Promise(r=>setTimeout(r,200));}completeAllBtn.pulse(true);});completeAllBtn.style.flex='1';correctContainer.appendChild(completeAllBtn);const autoWrongBtn=mkButton('100+ Score',()=>{const btnRef=autoWrongBtn;const truePairs=buildTruePairs();if(!truePairs){btnRef.pulse(false);return;}const cachedPair=pickWrongPair(truePairs);if(!cachedPair){btnRef.pulse(false);return;}let duration=2500,elapsed=0;const clickInterval=setInterval(()=>{try{cachedPair[0].click();setTimeout(()=>cachedPair[1].click(),0);}catch(e){}},1);const displayInterval=setInterval(()=>{elapsed+=100;btnRef.textContent=`100+ Score (${Math.max(0,((duration-elapsed)/1000).toFixed(1))}s)`;if(elapsed>=duration){clearInterval(clickInterval);clearInterval(displayInterval);btnRef.textContent='100+ Score';btnRef.pulse(true);}},100);});menu.appendChild(autoWrongBtn);const spoofDiv=document.createElement('div');spoofDiv.style.display='flex';spoofDiv.style.gap='6px';spoofDiv.style.marginTop='10px';const spoofInput=document.createElement('input');spoofInput.type='text';spoofInput.placeholder='Spoof time (e.g. 1.0)';spoofInput.style.flex='1';spoofInput.style.padding='8px';spoofInput.style.border=`2px solid ${shadeColor(menuBase,-40)}`;spoofInput.style.borderRadius='6px';spoofInput.style.background=shadeColor(menuBase,30);spoofInput.style.color='#fff';const spoofBtn=mkButton('Spoof Time',()=>{let val=spoofInput.value.trim();if(!val){spoofBtn.pulse(false);return;}let num=parseFloat(val.replace('.',''));const data=(d=>{let s=JSON.stringify(d),arr=[];for(let i=0;i<s.length;i++){arr.push(s.charCodeAt(i)+(77%(i+1)));}return arr.join('-');})({previous_record:0,score:num,selectedOnly:false,time_started:Date.now()-(num*100)-1500,too_small:0});const token=document.cookie.split('qtkn=')[1]?.split(';')[0];if(!token){spoofBtn.pulse(false);return;}const setId=__NEXT_DATA__.query.setId;fetch(`https://quizlet.com/${setId}/scatter/highscores`,{headers:{'content-type':'application/json','cs-token':token,'x-quizlet-api-security-id':token,'x-requested-with':'XMLHttpRequest'},body:JSON.stringify({data}),method:'POST'}).then(()=>spoofBtn.pulse(true)).catch(()=>spoofBtn.pulse(false));});spoofDiv.appendChild(spoofInput);spoofDiv.appendChild(spoofBtn);menu.appendChild(spoofDiv);let d=false,oX,oY,targetX,targetY,animating=false;menu.onmousedown=e=>{if(e.target.tagName!=='BUTTON'&&e.target.tagName!=='INPUT'){d=true;document.body.style.userSelect='none';oX=e.clientX-menu.offsetLeft;oY=e.clientY-menu.offsetTop;targetX=menu.offsetLeft;targetY=menu.offsetTop;if(!animating)animateDrag();}};document.onmouseup=()=>{d=false;document.body.style.userSelect='auto';};document.onmousemove=e=>{if(d){targetX=e.clientX-oX;targetY=e.clientY-oY;}};function animateDrag(){animating=true;const dx=(targetX-menu.offsetLeft)*0.8;const dy=(targetY-menu.offsetTop)*0.8;menu.style.left=menu.offsetLeft+dx+'px';menu.style.top=menu.offsetTop+dy+'px';if(d||Math.abs(dx)>0.5||Math.abs(dy)>0.5){requestAnimationFrame(animateDrag);}else{animating=false;}}})();
